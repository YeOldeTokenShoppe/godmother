(function(v,z){typeof exports=="object"&&typeof module<"u"?z(exports):typeof define=="function"&&define.amd?define(["exports"],z):(v=typeof globalThis<"u"?globalThis:v||self,z(v["client-analytics"]={}))})(this,function(v){"use strict";const z=new Error("apiEndpoint must be a valid url"),Oe={platform:"unknown",projectName:"",isDebug:!1,onError:()=>{},eventPath:"/events",metricPath:"/metrics",apiEndpoint:"https://cca-lite.coinbase.com",disabled:!1,isAlwaysAuthed:!1,version:null,ricTimeoutScheduleEvent:1e3,reset:()=>{}},Ut=e=>{if(!e)return!1;try{return new URL(e),!0}catch{return!1}},xt=e=>{if(e.apiEndpoint&&!Ut(e.apiEndpoint))throw z;return{...Oe,...e}};function le(){return new Date().getTime()}const Ae={timeStart:le(),timeOnPagePath:0,prevTimeOnPagePath:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Be={exports:{}},Ie={exports:{}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return n.rotl(t,8)&16711935|n.rotl(t,24)&4278255360;for(var r=0;r<t.length;r++)t[r]=n.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(t){for(var r=[],i=0,o=0;i<t.length;i++,o+=8)r[o>>>5]|=t[i]<<24-o%32;return r},wordsToBytes:function(t){for(var r=[],i=0;i<t.length*32;i+=8)r.push(t[i>>>5]>>>24-i%32&255);return r},bytesToHex:function(t){for(var r=[],i=0;i<t.length;i++)r.push((t[i]>>>4).toString(16)),r.push((t[i]&15).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],i=0;i<t.length;i+=2)r.push(parseInt(t.substr(i,2),16));return r},bytesToBase64:function(t){for(var r=[],i=0;i<t.length;i+=3)for(var o=t[i]<<16|t[i+1]<<8|t[i+2],s=0;s<4;s++)i*8+s*6<=t.length*8?r.push(e.charAt(o>>>6*(3-s)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],i=0,o=0;i<t.length;o=++i%4)o!=0&&r.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*o+8)-1)<<o*2|e.indexOf(t.charAt(i))>>>6-o*2);return r}};Ie.exports=n})();var Ht=Ie.exports,fe={utf8:{stringToBytes:function(e){return fe.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(fe.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],t=0;t<e.length;t++)n.push(e.charCodeAt(t)&255);return n},bytesToString:function(e){for(var n=[],t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return n.join("")}}},Re=fe;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $t=function(e){return e!=null&&(Ue(e)||qt(e)||!!e._isBuffer)};function Ue(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function qt(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Ue(e.slice(0,0))}(function(){var e=Ht,n=Re.utf8,t=$t,r=Re.bin,i=function(o,s){o.constructor==String?s&&s.encoding==="binary"?o=r.stringToBytes(o):o=n.stringToBytes(o):t(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&o.constructor!==Uint8Array&&(o=o.toString());for(var a=e.bytesToWords(o),m=o.length*8,l=1732584193,c=-271733879,u=-1732584194,f=271733878,d=0;d<a.length;d++)a[d]=(a[d]<<8|a[d]>>>24)&16711935|(a[d]<<24|a[d]>>>8)&4278255360;a[m>>>5]|=128<<m%32,a[(m+64>>>9<<4)+14]=m;for(var p=i._ff,h=i._gg,g=i._hh,E=i._ii,d=0;d<a.length;d+=16){var er=l,tr=c,nr=u,rr=f;l=p(l,c,u,f,a[d+0],7,-680876936),f=p(f,l,c,u,a[d+1],12,-389564586),u=p(u,f,l,c,a[d+2],17,606105819),c=p(c,u,f,l,a[d+3],22,-1044525330),l=p(l,c,u,f,a[d+4],7,-176418897),f=p(f,l,c,u,a[d+5],12,1200080426),u=p(u,f,l,c,a[d+6],17,-1473231341),c=p(c,u,f,l,a[d+7],22,-45705983),l=p(l,c,u,f,a[d+8],7,1770035416),f=p(f,l,c,u,a[d+9],12,-1958414417),u=p(u,f,l,c,a[d+10],17,-42063),c=p(c,u,f,l,a[d+11],22,-1990404162),l=p(l,c,u,f,a[d+12],7,1804603682),f=p(f,l,c,u,a[d+13],12,-40341101),u=p(u,f,l,c,a[d+14],17,-1502002290),c=p(c,u,f,l,a[d+15],22,1236535329),l=h(l,c,u,f,a[d+1],5,-165796510),f=h(f,l,c,u,a[d+6],9,-1069501632),u=h(u,f,l,c,a[d+11],14,643717713),c=h(c,u,f,l,a[d+0],20,-373897302),l=h(l,c,u,f,a[d+5],5,-701558691),f=h(f,l,c,u,a[d+10],9,38016083),u=h(u,f,l,c,a[d+15],14,-660478335),c=h(c,u,f,l,a[d+4],20,-405537848),l=h(l,c,u,f,a[d+9],5,568446438),f=h(f,l,c,u,a[d+14],9,-1019803690),u=h(u,f,l,c,a[d+3],14,-187363961),c=h(c,u,f,l,a[d+8],20,1163531501),l=h(l,c,u,f,a[d+13],5,-1444681467),f=h(f,l,c,u,a[d+2],9,-51403784),u=h(u,f,l,c,a[d+7],14,1735328473),c=h(c,u,f,l,a[d+12],20,-1926607734),l=g(l,c,u,f,a[d+5],4,-378558),f=g(f,l,c,u,a[d+8],11,-2022574463),u=g(u,f,l,c,a[d+11],16,1839030562),c=g(c,u,f,l,a[d+14],23,-35309556),l=g(l,c,u,f,a[d+1],4,-1530992060),f=g(f,l,c,u,a[d+4],11,1272893353),u=g(u,f,l,c,a[d+7],16,-155497632),c=g(c,u,f,l,a[d+10],23,-1094730640),l=g(l,c,u,f,a[d+13],4,681279174),f=g(f,l,c,u,a[d+0],11,-358537222),u=g(u,f,l,c,a[d+3],16,-722521979),c=g(c,u,f,l,a[d+6],23,76029189),l=g(l,c,u,f,a[d+9],4,-640364487),f=g(f,l,c,u,a[d+12],11,-421815835),u=g(u,f,l,c,a[d+15],16,530742520),c=g(c,u,f,l,a[d+2],23,-995338651),l=E(l,c,u,f,a[d+0],6,-198630844),f=E(f,l,c,u,a[d+7],10,1126891415),u=E(u,f,l,c,a[d+14],15,-1416354905),c=E(c,u,f,l,a[d+5],21,-57434055),l=E(l,c,u,f,a[d+12],6,1700485571),f=E(f,l,c,u,a[d+3],10,-1894986606),u=E(u,f,l,c,a[d+10],15,-1051523),c=E(c,u,f,l,a[d+1],21,-2054922799),l=E(l,c,u,f,a[d+8],6,1873313359),f=E(f,l,c,u,a[d+15],10,-30611744),u=E(u,f,l,c,a[d+6],15,-1560198380),c=E(c,u,f,l,a[d+13],21,1309151649),l=E(l,c,u,f,a[d+4],6,-145523070),f=E(f,l,c,u,a[d+11],10,-1120210379),u=E(u,f,l,c,a[d+2],15,718787259),c=E(c,u,f,l,a[d+9],21,-343485551),l=l+er>>>0,c=c+tr>>>0,u=u+nr>>>0,f=f+rr>>>0}return e.endian([l,c,u,f])};i._ff=function(o,s,a,m,l,c,u){var f=o+(s&a|~s&m)+(l>>>0)+u;return(f<<c|f>>>32-c)+s},i._gg=function(o,s,a,m,l,c,u){var f=o+(s&m|a&~m)+(l>>>0)+u;return(f<<c|f>>>32-c)+s},i._hh=function(o,s,a,m,l,c,u){var f=o+(s^a^m)+(l>>>0)+u;return(f<<c|f>>>32-c)+s},i._ii=function(o,s,a,m,l,c,u){var f=o+(a^(s|~m))+(l>>>0)+u;return(f<<c|f>>>32-c)+s},i._blocksize=16,i._digestsize=16,Be.exports=function(o,s){if(o==null)throw new Error("Illegal argument "+o);var a=e.wordsToBytes(i(o,s));return s&&s.asBytes?a:s&&s.asString?r.bytesToString(a):e.bytesToHex(a)}})();var Wt=Be.exports;const Vt=jt(Wt),zt=(e,n)=>Vt(e+n),Jt="application/json",xe=e=>{const{data:n,onError:t,url:r}=e,i=Jt,o=JSON.stringify(n);fetch(r,{method:"POST",mode:"no-cors",headers:{"Content-Type":i},body:o}).catch(t)},je=()=>{},Gt={sendMetrics:je,sendEvents:je};function Yt(e){return e.forEach(n=>{n.metricName&&(n.metric_name=n.metricName,delete n.metricName),n.metricType&&(n.type=n.metricType,delete n.metricType)}),e}const Kt=e=>{if(V().isOptOut||e.length===0)return;let t;try{t=JSON.stringify(e)}catch(l){let c;l instanceof Error?c=l:(c=new Error("unknown"),c.message=l);const u=e.map(d=>d.name).join(", ");t=JSON.stringify(e),w().onError(c,{listEventName:u,stringifiedEventData:t})}const{apiEndpoint:r,eventPath:i,onError:o}=w(),s=le().toString(),a={e:t,checksum:zt(t,s)},m=`${r}${i}`;xe({url:m,data:a,onError:o})},Qt=e=>{const{apiEndpoint:n,metricPath:t,onError:r}=w(),i=`${n}${t}`,o={metrics:Yt(e)};xe({url:i,data:o,onError:r})},Zt=()=>({sendMetrics:Qt,sendEvents:Kt}),He=()=>{const e=[];return{add:i=>{e.push(i)},pop:()=>e.shift(),flush:()=>{e.length=0},get length(){return e.length},items:e}},Xt=30,en=5e3,$e={queue:He(),add:()=>{},items:[],length:0},tn=(e,n=Xt,t=en)=>{const r=He(),i=(a,m="low")=>{r.add(a),(r.length>=n||m==="high")&&o()},o=()=>{r.length!==0&&(e(r.items),r.flush())},s=()=>setTimeout(()=>{o(),s()},t);return s(),{queue:r,add:i,get items(){return r.items},get length(){return r.length}}},qe={lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null},We=()=>{const e=w();return e.platform==="unknown"?(e.onError(new Error("SDK platform not initialized")),!1):!0},nn=e=>e,Ve=(...e)=>e.reverse().reduce((n,t)=>r=>n(t(r)),nn),rn=()=>{const e=V();e.languageCode=(navigator==null?void 0:navigator.languages[0])||(navigator==null?void 0:navigator.language)||""},an=e=>{const n=It();n.height=e.height,n.width=e.width},on=()=>{var n;const e=It();e.userAgent=((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent)||null},cn=()=>{on(),an({height:(window==null?void 0:window.innerHeight)??null,width:(window==null?void 0:window.innerWidth)??null})},sn=()=>{rn()},un=()=>{cn()},ln=e=>{const n=B();return!e.pagePath&&n.pagePath&&(e.pagePath=n.pagePath),e},fn=e=>{var r;const n=V(),t=w();return e.tags={auth:n.isAuthed()?"loggedIn":"notLoggedIn",platform:t.platform,project_name:t.projectName,...e.tags,locale:n.locale??"",version_name:((r=t.version)==null?void 0:r.toString())||""},e},dn=e=>{const n=le(),t={...e},r=V(),i=w();if(Object.keys(t).length===0){i.onError(new Error("missing logData"));const s={...ze("unknown","unknown","unknown"),locale:r.locale,session_lcc_id:r.session_lcc_id,timestamp:n,time_start:Ae.timeStart};return Object.assign(e,s),e}const o={...t,...ze(t.action,t.component,t.name),locale:r.locale,session_lcc_id:r.session_lcc_id,timestamp:n,time_start:Ae.timeStart};return Object.assign(e,o),e},ze=(e,n,t)=>{const r=w();return{auth:V().isAuthed()?"loggedIn":"notLoggedIn",action:e,component:n,name:t,platform:r.platform,project_name:r.projectName}},mn=e=>{const n=B();return n.pageviewConfig.isEnabled&&Object.assign(e,Lt(n)),e},vn=e=>{const n=B();return Object.keys(n.initialUAAData).length>0?(n.initialUAAData,Object.assign(e,n.initialUAAData),e):(n.initialUAAData={...Nt(),...Dt(),...Mt()},Object.assign(e,n.initialUAAData),e)},gn=e=>Ve(ln,fn)(e),pn=e=>Ve(mn,vn,dn)(e),M=(e,n="low")=>{const{config:t,identity:r}=U();if(r.isOptOut||t.disabled||!We())return Promise.resolve(null);const i=pn(e);return Qn().add(i,n),Promise.resolve(e)},hn="pageview",ee={navigationTiming:{eventName:"perf_navigation_timing"},redirectTime:{eventName:"perf_redirect_time"},RT:{eventName:"perf_redirect_time"},TTFB:{eventName:"perf_time_to_first_byte"},networkInformation:{eventName:"perf_network_information"},storageEstimate:{eventName:"perf_storage_estimate"},FCP:{eventName:"perf_first_contentful_paint"},FID:{eventName:"perf_first_input_delay"},LCP:{eventName:"perf_largest_contentful_paint"},CLS:{eventName:"perf_cumulative_layout_shift"},TBT:{eventName:"perf_total_blocking_time"},NTBT:{eventName:"perf_navigation_total_blocking_time"},INP:{eventName:"perf_interact_to_next_paint"},ET:{eventName:"perf_element_timing"},userJourneyStep:{eventName:"perf_user_journey_step"}};var F=(e=>(e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e))(F||{}),C=(e=>(e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e))(C||{}),S=(e=>(e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e))(S||{});const P=e=>{if(w().disabled||!We())return Promise.resolve(null);const t=gn(e);return Kn().add(t),Promise.resolve(e)};var I,x,T={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{}},j=window,Tn=j.console,k=j.navigator,O=j.performance,de=function(){return k.deviceMemory},me=function(){return k.hardwareConcurrency},te=function(){return O&&!!O.getEntriesByType&&!!O.now&&!!O.mark},Je="4g",Ge=!1,ne={},Ye={value:0},ve={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},ge={value:0},J={value:0},Ke={},G={isHidden:!1,didChange:!1},En=function(){G.isHidden=!1,document.hidden&&(G.isHidden=document.hidden,G.didChange=!0)},pe=function(e,n){try{var t=new PerformanceObserver(function(r){n(r.getEntries())});return t.observe({type:e,buffered:!0}),t}catch(r){Tn.warn("Perfume.js:",r)}return null},Qe=function(){return!!(me()&&me()<=4)||!!(de()&&de()<=4)},yn=function(e,n){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return Qe()||n}},re=function(e){return parseFloat(e.toFixed(4))},Y=function(e){return typeof e!="number"?null:re(e/Math.pow(1024,2))},Ze=function(e,n,t,r,i){var o,s=function(){T.analyticsTracker&&(G.isHidden&&!["CLS","INP"].includes(e)||T.analyticsTracker({attribution:r,metricName:e,data:n,navigatorInformation:k?{deviceMemory:de()||0,hardwareConcurrency:me()||0,serviceWorkerStatus:"serviceWorker"in k?k.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:Qe(),isLowEndExperience:yn(Je,Ge)}:{},rating:t,navigationType:i}))};["CLS","INP"].includes(e)?s():(o=s,"requestIdleCallback"in j?j.requestIdleCallback(o,{timeout:3e3}):o())},_n=function(e){e.forEach(function(n){if(!(n.name!=="self"||n.startTime<Ye.value)){var t=n.duration-50;t>0&&(ge.value+=t,J.value+=t)}})};(function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"})(I||(I={}));var A,K,Xe,ie,he;(x={})[I.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},x[I.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},x[I.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},x[I.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},x[I.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4};var Te={RT:[100,200],TBT:[200,600],NTBT:[200,600]},Ee=function(e,n){return Te[e]?n<=Te[e][0]?"good":n<=Te[e][1]?"needsImprovement":"poor":null},H=function(e,n,t){Object.keys(n).forEach(function(r){typeof n[r]=="number"&&(n[r]=re(n[r]))}),Ze(e,n,null,t||{})},b=function(e){var n=e.attribution,t=e.name,r=e.rating,i=e.value,o=e.navigationType;t==="FCP"&&(Ye.value=i),["FCP","LCP"].includes(t)&&!Ke[0]&&(Ke[0]=pe("longtask",_n)),t==="FID"&&setTimeout(function(){G.didChange||(b({attribution:n,name:"TBT",rating:Ee("TBT",ge.value),value:ge.value,navigationType:o}),H("dataConsumption",ve.value))},1e4);var s=re(i);s<=T.maxTime&&s>=0&&Ze(t,s,r,n,o)},$=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Q=function(e){if(document.readyState==="loading")return"loading";var n=$();if(n){if(e<n.domInteractive)return"loading";if(n.domContentLoadedEventStart===0||e<n.domContentLoadedEventStart)return"dom-interactive";if(n.domComplete===0||e<n.domComplete)return"dom-content-loaded"}return"complete"},wn=function(e){var n=e.nodeName;return e.nodeType===1?n.toLowerCase():n.toUpperCase().replace(/^#/,"")},ae=function(e,n){var t="";try{for(;e&&e.nodeType!==9;){var r=e,i=r.id?"#"+r.id:wn(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+i.length>(n||100)-1)return t||i;if(t=t?i+">"+t:i,r.id)break;e=r.parentNode}}catch{}return t},et=-1,tt=function(){return et},R=function(e){addEventListener("pageshow",function(n){n.persisted&&(et=n.timeStamp,e(n))},!0)},oe=function(){var e=$();return e&&e.activationStart||0},y=function(e,n){var t=$(),r="navigate";return tt()>=0?r="back-forward-cache":t&&(document.prerendering||oe()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:e,value:n===void 0?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},q=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){n(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch{}},_=function(e,n,t,r){var i,o;return function(s){n.value>=0&&(s||r)&&((o=n.value-(i||0))||i===void 0)&&(i=n.value,n.delta=o,n.rating=function(a,m){return a>m[1]?"poor":a>m[0]?"needs-improvement":"good"}(n.value,t),e(n))}},ye=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},ce=function(e){var n=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||e(t)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},_e=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},W=-1,nt=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},se=function(e){document.visibilityState==="hidden"&&W>-1&&(W=e.type==="visibilitychange"?e.timeStamp:0,Sn())},rt=function(){addEventListener("visibilitychange",se,!0),addEventListener("prerenderingchange",se,!0)},Sn=function(){removeEventListener("visibilitychange",se,!0),removeEventListener("prerenderingchange",se,!0)},we=function(){return W<0&&(W=nt(),rt(),R(function(){setTimeout(function(){W=nt(),rt()},0)})),{get firstHiddenTime(){return W}}},Z=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},it=[1800,3e3],at=function(e,n){n=n||{},Z(function(){var t,r=we(),i=y("FCP"),o=q("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-oe(),0),i.entries.push(a),t(!0)))})});o&&(t=_(e,i,it,n.reportAllChanges),R(function(s){i=y("FCP"),t=_(e,i,it,n.reportAllChanges),ye(function(){i.value=performance.now()-s.timeStamp,t(!0)})}))})},ot=[.1,.25],X={passive:!0,capture:!0},kn=new Date,ct=function(e,n){A||(A=n,K=e,Xe=new Date,ut(removeEventListener),st())},st=function(){if(K>=0&&K<Xe-kn){var e={entryType:"first-input",name:A.type,target:A.target,cancelable:A.cancelable,startTime:A.timeStamp,processingStart:A.timeStamp+K};ie.forEach(function(n){n(e)}),ie=[]}},Pn=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(t,r){var i=function(){ct(t,r),s()},o=function(){s()},s=function(){removeEventListener("pointerup",i,X),removeEventListener("pointercancel",o,X)};addEventListener("pointerup",i,X),addEventListener("pointercancel",o,X)}(n,e):ct(n,e)}},ut=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return e(n,Pn,X)})},lt=[100,300],bn=function(e,n){n=n||{},Z(function(){var t,r=we(),i=y("FID"),o=function(m){m.startTime<r.firstHiddenTime&&(i.value=m.processingStart-m.startTime,i.entries.push(m),t(!0))},s=function(m){m.forEach(o)},a=q("first-input",s);t=_(e,i,lt,n.reportAllChanges),a&&ce(_e(function(){s(a.takeRecords()),a.disconnect()})),a&&R(function(){var m;i=y("FID"),t=_(e,i,lt,n.reportAllChanges),ie=[],K=-1,A=null,ut(addEventListener),m=o,ie.push(m),st()})})},ft=0,Se=1/0,ue=0,Ln=function(e){e.forEach(function(n){n.interactionId&&(Se=Math.min(Se,n.interactionId),ue=Math.max(ue,n.interactionId),ft=ue?(ue-Se)/7+1:0)})},dt=function(){return he?ft:performance.interactionCount||0},Nn=function(){"interactionCount"in performance||he||(he=q("event",Ln,{type:"event",buffered:!0,durationThreshold:0}))},mt=[200,500],vt=0,gt=function(){return dt()-vt},L=[],ke={},pt=function(e){var n=L[L.length-1],t=ke[e.interactionId];if(t||L.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,L.push(r)}L.sort(function(i,o){return o.latency-i.latency}),L.splice(10).forEach(function(i){delete ke[i.id]})}},Dn=function(e,n){(function(t,r){r=r||{},Z(function(){var i;Nn();var o,s=y("INP"),a=function(l){l.forEach(function(f){f.interactionId&&pt(f),f.entryType==="first-input"&&!L.some(function(d){return d.entries.some(function(p){return f.duration===p.duration&&f.startTime===p.startTime})})&&pt(f)});var c,u=(c=Math.min(L.length-1,Math.floor(gt()/50)),L[c]);u&&u.latency!==s.value&&(s.value=u.latency,s.entries=u.entries,o())},m=q("event",a,{durationThreshold:(i=r.durationThreshold)!==null&&i!==void 0?i:40});o=_(t,s,mt,r.reportAllChanges),m&&("interactionId"in PerformanceEventTiming.prototype&&m.observe({type:"first-input",buffered:!0}),ce(function(){a(m.takeRecords()),s.value<0&&gt()>0&&(s.value=0,s.entries=[]),o(!0)}),R(function(){L=[],vt=dt(),s=y("INP"),o=_(t,s,mt,r.reportAllChanges)}))})})(function(t){(function(r){if(r.entries.length){var i=r.entries.sort(function(o,s){return s.duration-o.duration||s.processingEnd-s.processingStart-(o.processingEnd-o.processingStart)})[0];r.attribution={eventTarget:ae(i.target),eventType:i.name,eventTime:i.startTime,eventEntry:i,loadState:Q(i.startTime)}}else r.attribution={}})(t),e(t)},n)},ht=[2500,4e3],Pe={},Tt=[800,1800],Mn=function e(n){document.prerendering?Z(function(){return e(n)}):document.readyState!=="complete"?addEventListener("load",function(){return e(n)},!0):setTimeout(n,0)},Fn=function(e,n){n=n||{};var t=y("TTFB"),r=_(e,t,Tt,n.reportAllChanges);Mn(function(){var i=$();if(i){var o=i.responseStart;if(o<=0||o>performance.now())return;t.value=Math.max(o-oe(),0),t.entries=[i],r(!0),R(function(){t=y("TTFB",0),(r=_(e,t,Tt,n.reportAllChanges))(!0)})}})},Cn=function(e){e.forEach(function(n){n.identifier&&b({attribution:{identifier:n.identifier},name:"ET",rating:null,value:n.startTime})})},On=function(e){e.forEach(function(n){if(T.isResourceTiming&&H("resourceTiming",n),n.decodedBodySize&&n.initiatorType){var t=n.decodedBodySize/1e3;ve.value[n.initiatorType]+=t,ve.value.total+=t}})},An=function(){(function(e,n){Fn(function(t){(function(r){if(r.entries.length){var i=r.entries[0],o=i.activationStart||0,s=Math.max(i.domainLookupStart-o,0),a=Math.max(i.connectStart-o,0),m=Math.max(i.requestStart-o,0);r.attribution={waitingTime:s,dnsTime:a-s,connectionTime:m-a,requestTime:r.value-m,navigationEntry:i}}else r.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}})(t),e(t)},n)})(function(e){e.value>0&&b(e)},T.reportOptions.ttfb),function(e,n){(function(t,r){r=r||{},at(_e(function(){var i,o=y("CLS",0),s=0,a=[],m=function(c){c.forEach(function(u){if(!u.hadRecentInput){var f=a[0],d=a[a.length-1];s&&u.startTime-d.startTime<1e3&&u.startTime-f.startTime<5e3?(s+=u.value,a.push(u)):(s=u.value,a=[u])}}),s>o.value&&(o.value=s,o.entries=a,i())},l=q("layout-shift",m);l&&(i=_(t,o,ot,r.reportAllChanges),ce(function(){m(l.takeRecords()),i(!0)}),R(function(){s=0,o=y("CLS",0),i=_(t,o,ot,r.reportAllChanges),ye(function(){return i()})}),setTimeout(i,0))}))})(function(t){(function(r){if(r.entries.length){var i=r.entries.reduce(function(a,m){return a&&a.value>m.value?a:m});if(i&&i.sources&&i.sources.length){var o=(s=i.sources).find(function(a){return a.node&&a.node.nodeType===1})||s[0];if(o)return void(r.attribution={largestShiftTarget:ae(o.node),largestShiftTime:i.startTime,largestShiftValue:i.value,largestShiftSource:o,largestShiftEntry:i,loadState:Q(i.startTime)})}}var s;r.attribution={}})(t),e(t)},n)}(function(e){return b(e)},T.reportOptions.cls),function(e,n){at(function(t){(function(r){if(r.entries.length){var i=$(),o=r.entries[r.entries.length-1];if(i){var s=i.activationStart||0,a=Math.max(0,i.responseStart-s);return void(r.attribution={timeToFirstByte:a,firstByteToFCP:r.value-a,loadState:Q(r.entries[0].startTime),navigationEntry:i,fcpEntry:o})}}r.attribution={timeToFirstByte:0,firstByteToFCP:r.value,loadState:Q(tt())}})(t),e(t)},n)}(function(e){return b(e)},T.reportOptions.fcp),function(e,n){bn(function(t){(function(r){var i=r.entries[0];r.attribution={eventTarget:ae(i.target),eventType:i.name,eventTime:i.startTime,eventEntry:i,loadState:Q(i.startTime)}})(t),e(t)},n)}(function(e){return b(e)},T.reportOptions.fid),function(e,n){(function(t,r){r=r||{},Z(function(){var i,o=we(),s=y("LCP"),a=function(c){var u=c[c.length-1];u&&u.startTime<o.firstHiddenTime&&(s.value=Math.max(u.startTime-oe(),0),s.entries=[u],i())},m=q("largest-contentful-paint",a);if(m){i=_(t,s,ht,r.reportAllChanges);var l=_e(function(){Pe[s.id]||(a(m.takeRecords()),m.disconnect(),Pe[s.id]=!0,i(!0))});["keydown","click"].forEach(function(c){addEventListener(c,function(){return setTimeout(l,0)},!0)}),ce(l),R(function(c){s=y("LCP"),i=_(t,s,ht,r.reportAllChanges),ye(function(){s.value=performance.now()-c.timeStamp,Pe[s.id]=!0,i(!0)})})}})})(function(t){(function(r){if(r.entries.length){var i=$();if(i){var o=i.activationStart||0,s=r.entries[r.entries.length-1],a=s.url&&performance.getEntriesByType("resource").filter(function(d){return d.name===s.url})[0],m=Math.max(0,i.responseStart-o),l=Math.max(m,a?(a.requestStart||a.startTime)-o:0),c=Math.max(l,a?a.responseEnd-o:0),u=Math.max(c,s?s.startTime-o:0),f={element:ae(s.element),timeToFirstByte:m,resourceLoadDelay:l-m,resourceLoadTime:c-l,elementRenderDelay:u-c,navigationEntry:i,lcpEntry:s};return s.url&&(f.url=s.url),a&&(f.lcpResourceEntry=a),void(r.attribution=f)}}r.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:r.value}})(t),e(t)},n)}(function(e){return b(e)},T.reportOptions.lcp),Dn(function(e){return b(e)},T.reportOptions.inp),T.isResourceTiming&&pe("resource",On),T.isElementTiming&&pe("element",Cn)},Bn=function(e){var n="usageDetails"in e?e.usageDetails:{};H("storageEstimate",{quota:Y(e.quota),usage:Y(e.usage),caches:Y(n.caches),indexedDB:Y(n.indexedDB),serviceWorker:Y(n.serviceWorkerRegistrations)})},N={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},In=function(){N.startMarkToStepsMap={},N.finalMarkToStepsMap={},N.active={},N.navigationSteps={}},Rn=function(e){if(e===void 0&&(e={}),T.analyticsTracker=e.analyticsTracker,T.isResourceTiming=!!e.resourceTiming,T.isElementTiming=!!e.elementTiming,T.maxTime=e.maxMeasureTime||T.maxTime,T.reportOptions=e.reportOptions||T.reportOptions,T.steps=e.steps,T.onMarkStep=e.onMarkStep,te()){"PerformanceObserver"in j&&An(),document.hidden!==void 0&&document.addEventListener("visibilitychange",En);var n=function(){if(!te())return{};var t=O.getEntriesByType("navigation")[0];if(!t)return{};var r=t.responseStart,i=t.responseEnd;return{fetchTime:i-t.fetchStart,workerTime:t.workerStart>0?i-t.workerStart:0,totalTime:i-t.requestStart,downloadTime:i-r,timeToFirstByte:r-t.requestStart,headerSize:t.transferSize-t.encodedBodySize||0,dnsLookupTime:t.domainLookupEnd-t.domainLookupStart,redirectTime:t.redirectEnd-t.redirectStart}}();H("navigationTiming",n),n.redirectTime&&b({attribution:{},name:"RT",rating:Ee("RT",n.redirectTime),value:n.redirectTime}),H("networkInformation",function(){if("connection"in k){var t=k.connection;return typeof t!="object"?{}:(Je=t.effectiveType,Ge=!!t.saveData,{downlink:t.downlink,effectiveType:t.effectiveType,rtt:t.rtt,saveData:!!t.saveData})}return{}}()),k&&k.storage&&typeof k.storage.estimate=="function"&&k.storage.estimate().then(Bn),T.steps&&T.steps&&(In(),Object.entries(T.steps).forEach(function(t){var r,i,o=t[0],s=t[1].marks,a=s[0],m=s[1],l=(i=N.startMarkToStepsMap[a])!==null&&i!==void 0?i:{};if(l[o]=!0,N.startMarkToStepsMap[a]=l,N.finalMarkToStepsMap[m]){var c=N.finalMarkToStepsMap[m][a]||[];c.push(o),N.finalMarkToStepsMap[m][a]=c}else N.finalMarkToStepsMap[m]=((r={})[a]=[o],r)}))}},Un=function(e){te()&&!ne[e]&&(ne[e]=!0,O.mark("mark_".concat(e,"_start")))},xn=function(e,n,t){if(n===void 0&&(n={}),t===void 0&&(t=!0),te()&&ne[e]){O.mark("mark_".concat(e,"_end")),delete ne[e];var r=function(i){O.measure(i,"mark_".concat(i,"_start"),"mark_".concat(i,"_end"));var o=O.getEntriesByName(i).pop();return o&&o.entryType==="measure"?o.duration:-1}(e);t&&H(e,re(r),n)}},Et=0,jn=function(){Un("ntbt"),J.value=0,clearTimeout(Et),Et=setTimeout(function(){xn("ntbt",{},!1),b({attribution:{},name:"NTBT",rating:Ee("NTBT",J.value),value:J.value}),J.value=0},2e3)};function yt(e){return e.toLowerCase()}const Hn=3e4;let _t={};const $n=()=>{const e=w();return{analyticsTracker:n=>{const{data:t,attribution:r,metricName:i,navigatorInformation:o,rating:s}=n,a=ee[i],m=(r==null?void 0:r.category)||null;if(!a&&!m)return;const l=(o==null?void 0:o.deviceMemory)||0,c=(o==null?void 0:o.hardwareConcurrency)||0,u=(o==null?void 0:o.isLowEndDevice)||!1,f=(o==null?void 0:o.isLowEndExperience)||!1,d=(o==null?void 0:o.serviceWorkerStatus)||"unsupported",p={deviceMemory:l,hardwareConcurrency:c,isLowEndDevice:u,isLowEndExperience:f,serviceWorkerStatus:d,..._t},h={is_low_end_device:u,is_low_end_experience:f,save_data:(t==null?void 0:t.saveData)||!1,service_worker:d,is_perf_metric:!0};if(i==="navigationTiming")t&&typeof(t==null?void 0:t.redirectTime)=="number"&&P({metricName:ee.redirectTime.eventName,metricType:S.histogram,tags:h,value:(t==null?void 0:t.redirectTime)||0});else if(i==="TTFB")M({name:a.eventName,action:F.measurement,component:C.page,duration:typeof t=="number"?t:null,vitalsScore:s||null,...p}),typeof t=="number"&&P({metricName:ee.TTFB.eventName,metricType:S.histogram,tags:{...h},value:t}),s&&P({metricName:`perf_web_vitals_ttfb_${s}`,metricType:S.count,tags:h,value:1});else if(i==="networkInformation")t!=null&&t.effectiveType&&(_t=t,M({name:a.eventName,action:F.measurement,component:C.page,networkInformationDownlink:t==null?void 0:t.downlink,networkInformationEffectiveType:t==null?void 0:t.effectiveType,networkInformationRtt:t==null?void 0:t.rtt,networkInformationSaveData:t==null?void 0:t.saveData,navigatorDeviceMemory:l,navigatorHardwareConcurrency:c}));else if(i==="storageEstimate")typeof t=="object"&&t!==null&&M({name:a.eventName,action:F.measurement,component:C.page,...t,...p});else if(i==="CLS")M({name:a.eventName,action:F.measurement,component:C.page,score:typeof t=="number"?t*100:null,vitalsScore:s||null,...p}),s&&P({metricName:`perf_web_vitals_cls_${s}`,metricType:S.count,tags:h,value:1});else if(i==="FID"){const g=(r==null?void 0:r.performanceEntry)||null,E=parseInt((g==null?void 0:g.processingStart)||"");M({name:a.eventName,action:F.measurement,component:C.page,duration:typeof t=="number"?t:null,processingStart:g!=null&&g.processingStart?E:null,startTime:g!=null&&g.startTime?parseInt(g.startTime):null,vitalsScore:s||null,...p}),s&&P({metricName:`perf_web_vitals_fidVitals_${s}`,metricType:S.count,tags:h,value:1})}else i==="userJourneyStep"?(M({name:"perf_user_journey_step",action:F.measurement,component:C.page,duration:typeof t=="number"?t:null,rating:s??null,step_name:(r==null?void 0:r.stepName)||"",...p}),P({metricName:`user_journey_step.${e.projectName}.${e.platform}.${(r==null?void 0:r.stepName)||""}_vitals_${s}`,metricType:S.count,tags:h,value:1}),typeof t=="number"&&P({metricName:`user_journey_step.${e.projectName}.${e.platform}.${(r==null?void 0:r.stepName)||""}`,metricType:S.distribution,tags:h,value:t})):ee[i]&&t&&(M({name:a.eventName,action:F.measurement,component:C.page,duration:typeof t=="number"?t:null,vitalsScore:s||null,...p}),s&&(P({metricName:`perf_web_vitals_${yt(i)}_${s}`,metricType:S.count,tags:h,value:1}),i==="LCP"&&P({metricName:`perf_web_vitals_${yt(i)}`,metricType:S.distribution,tags:h,value:t})))},maxMeasureTime:Hn}},qn=()=>{jn()},Wn=()=>{const e=w();try{Rn($n())}catch(n){n instanceof Error&&e.onError(n)}},be={breadcrumbs:[],initialUAAData:{},pagePath:"",prevPagePath:"",pageviewConfig:{isEnabled:!1,blacklistRegex:[]},history:void 0},wt=["fbclid","gclid","msclkid","ptclid","ttclid","utm_source","utm_medium","utm_campaign","utm_term","utm_content"];function Vn(e){Le({breadcrumbs:e})}function St(e){Le({pageviewConfig:e})}function Le(e){const n=B();Object.assign(n,structuredClone(e))}const Ne=()=>{var e;return((e=window==null?void 0:window.location)==null?void 0:e.search)||""},De=()=>{var e;return((e=window==null?void 0:window.location)==null?void 0:e.pathname)||""},Me=()=>{var e;return((e=window==null?void 0:window.location)==null?void 0:e.hostname)||""};function Fe(){return(document==null?void 0:document.referrer)??""}const kt=()=>De()+Ne(),Pt=()=>{const e=B(),n=kt();!n||n===e.pagePath||(n!==e.pagePath&&bt(),e.pagePath=n)},bt=()=>{const e=B(),n=Fe();if(!e.prevPagePath&&n){const t=new URL(n);if(t.hostname===Me()){e.prevPagePath=t.pathname;return}}e.prevPagePath=e.pagePath},Lt=e=>({page_path:e.pagePath,prev_page_path:e.prevPagePath}),Nt=()=>{const e={};return wt.forEach(n=>{qe[n]&&(e[n]=qe[n])}),e},Dt=()=>{const e=new URLSearchParams(Ne()),n={};return wt.forEach(t=>{e.has(t)&&(n[t]=(e.get(t)||"").toLowerCase())}),n},Mt=()=>{const e=Fe();if(!e)return{};const n=new URL(e);return n.hostname===Me()?{}:{referrer:e,referring_domain:n.hostname}};function Ce(e={callMarkNTBT:!0}){const n=w(),{pageviewConfig:{blacklistRegex:t}}=B();n.platform!=="unknown"&&(t.some(r=>r.test(De()))||(M({name:hn,action:F.render,component:C.page}),e.callMarkNTBT&&qn()))}const Ft=e=>{const n=B();n.history=e,n.history.listen(()=>{Pt(),Ce()})},Ct=e=>{const{blacklistRegex:n,isEnabled:t,history:r}=e;St({blacklistRegex:n,isEnabled:t}),Ft(r),Ce({callMarkNTBT:!1})},Ot=()=>structuredClone(be),At={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,session_lcc_id:null,userAgent:null,userId:null,isAuthed:()=>!1},zn=()=>{const e=w();return{...At,isAuthed:()=>e.isAlwaysAuthed||!!V().userId}},Bt={browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},Jn=()=>({...Bt}),D={config:Oe,networkLayer:Gt,metricScheduler:$e,eventScheduler:$e,location:be,identity:At,device:Bt},Gn={createNetworkLayer:Zt,createScheduler:tn,createIdentity:zn,createDevice:Jn,createLocation:Ot},Yn=(e,n)=>{const t={...Gn,...n};D.config=e,D.networkLayer=t.createNetworkLayer(),D.metricScheduler=t.createScheduler(D.networkLayer.sendMetrics,e.batchMetricsThreshold,e.batchMetricsPeriod),D.eventScheduler=t.createScheduler(D.networkLayer.sendEvents,e.batchEventsThreshold,e.batchEventsPeriod),D.identity=t.createIdentity(),D.device=t.createDevice(),D.location=t.createLocation()},U=()=>D,w=()=>U().config,Kn=()=>U().metricScheduler,Qn=()=>U().eventScheduler,B=()=>U().location,V=()=>U().identity,It=()=>U().device,Rt=(e,n)=>{const t=xt(e);Yn(t,n),sn(),un(),Wn()},Zn=e=>n=>Rt(n,e),Xn=({blacklistRegex:e,browserHistory:n})=>{Ct({blacklistRegex:e||[],isEnabled:!0,history:n})};v.DEFAULT_LOCATION=be,v.MetricType=S,v.createLocation=Ot,v.getDocumentReferrer=Fe,v.getPagePath=kt,v.getPageviewProperties=Lt,v.getReferrerData=Mt,v.getUrlHostname=Me,v.getUrlParams=Ne,v.getUrlPathname=De,v.init=Rt,v.initTrackPageview=Xn,v.injectComponents=Zn,v.persistentUAAData=Nt,v.setBreadcrumbs=Vn,v.setLocation=Le,v.setLocationHistory=Ft,v.setLocationTracking=Ct,v.setPagePath=Pt,v.setPageviewConfig=St,v.setPrevPagePath=bt,v.trackEvent=M,v.trackMetric=P,v.trackPageView=Ce,v.uaaValuesFromUrl=Dt,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});
