"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,n={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{}},r=globalThis,i=r.console,a=r.navigator,o=r.performance,u=function(){return a.deviceMemory},c=function(){return a.hardwareConcurrency},s="mark.",l=function(){return o&&!!o.getEntriesByType&&!!o.now&&!!o.mark},f="4g",d=!1,v={},p={value:0},m={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},h={value:0},T={value:0},g={},y={isHidden:!1,didChange:!1},k=function(){y.isHidden=!1,document.hidden&&(y.isHidden=document.hidden,y.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){i.warn("Perfume.js:",e)}return null},b=function(){return!!(c()&&c()<=4)||!!(u()&&u()<=4)},E=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return b()||t}},M=function(e){return parseFloat(e.toFixed(4))},w=function(e){return"number"!=typeof e?null:M(e/Math.pow(1024,2))},x=function(e,t,i,o,s){var l,v=function(){n.analyticsTracker&&(y.isHidden&&!["CLS","INP"].includes(e)||n.analyticsTracker({attribution:o,metricName:e,data:t,navigatorInformation:a?{deviceMemory:u()||0,hardwareConcurrency:c()||0,serviceWorkerStatus:"serviceWorker"in a?a.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:b(),isLowEndExperience:E(f,d)}:{},rating:i,navigationType:s}))};["CLS","INP"].includes(e)?v():(l=v,"requestIdleCallback"in r?r.requestIdleCallback(l,{timeout:3e3}):l())},L=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<p.value)){var t=e.duration-50;t>0&&(h.value+=t,T.value+=t)}}))};exports.IThresholdTier=void 0,(e=exports.IThresholdTier||(exports.IThresholdTier={})).instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable";var C,O,B,I,P,D=((t={})[exports.IThresholdTier.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},t[exports.IThresholdTier.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},t[exports.IThresholdTier.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},t[exports.IThresholdTier.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},t[exports.IThresholdTier.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},t),F={RT:[100,200],TBT:[200,600],NTBT:[200,600]},j=function(e,t){return F[e]?t<=F[e][0]?"good":t<=F[e][1]?"needsImprovement":"poor":null},N=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=M(t[e]))})),x(e,t,null,n||{})},_=function(e){var t=e.attribution,r=e.name,i=e.rating,a=e.value,o=e.navigationType;"FCP"===r&&(p.value=a),["FCP","LCP"].includes(r)&&!g[0]&&(g[0]=S("longtask",L)),"FID"===r&&setTimeout((function(){y.didChange||(_({attribution:t,name:"TBT",rating:j("TBT",h.value),value:h.value,navigationType:o}),N("dataConsumption",m.value))}),1e4);var u=M(a);u<=n.maxTime&&u>=0&&x(r,u,i,t,o)},q=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},R=function(e){if("loading"===document.readyState)return"loading";var t=q();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},A=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},H=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:A(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},z=-1,W=function(){return z},J=function(e){addEventListener("pageshow",(function(t){t.persisted&&(z=t.timeStamp,e(t))}),!0)},U=function(){var e=q();return e&&e.activationStart||0},V=function(e,t){var n=q(),r="navigate";return W()>=0?r="back-forward-cache":n&&(document.prerendering||U()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},G=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},K=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Q=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},X=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Y=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Z=-1,$=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ee=function(e){"hidden"===document.visibilityState&&Z>-1&&(Z="visibilitychange"===e.type?e.timeStamp:0,ne())},te=function(){addEventListener("visibilitychange",ee,!0),addEventListener("prerenderingchange",ee,!0)},ne=function(){removeEventListener("visibilitychange",ee,!0),removeEventListener("prerenderingchange",ee,!0)},re=function(){return Z<0&&(Z=$(),te(),J((function(){setTimeout((function(){Z=$(),te()}),0)}))),{get firstHiddenTime(){return Z}}},ie=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},ae=[1800,3e3],oe=function(e,t){t=t||{},ie((function(){var n,r=re(),i=V("FCP"),a=G("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-U(),0),i.entries.push(e),n(!0)))}))}));a&&(n=K(e,i,ae,t.reportAllChanges),J((function(r){i=V("FCP"),n=K(e,i,ae,t.reportAllChanges),Q((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},ue=[.1,.25],ce={passive:!0,capture:!0},se=new Date,le=function(e,t){C||(C=t,O=e,B=new Date,ve(removeEventListener),fe())},fe=function(){if(O>=0&&O<B-se){var e={entryType:"first-input",name:C.type,target:C.target,cancelable:C.cancelable,startTime:C.timeStamp,processingStart:C.timeStamp+O};I.forEach((function(t){t(e)})),I=[]}},de=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):le(t,e)}},ve=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,de,ce)}))},pe=[100,300],me=function(e,t){t=t||{},ie((function(){var n,r=re(),i=V("FID"),a=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},o=function(e){e.forEach(a)},u=G("first-input",o);n=K(e,i,pe,t.reportAllChanges),u&&X(Y((function(){o(u.takeRecords()),u.disconnect()}))),u&&J((function(){var r;i=V("FID"),n=K(e,i,pe,t.reportAllChanges),I=[],O=-1,C=null,ve(addEventListener),r=a,I.push(r),fe()}))}))},he=0,Te=1/0,ge=0,ye=function(e){e.forEach((function(e){e.interactionId&&(Te=Math.min(Te,e.interactionId),ge=Math.max(ge,e.interactionId),he=ge?(ge-Te)/7+1:0)}))},ke=function(){return P?he:performance.interactionCount||0},Se=function(){"interactionCount"in performance||P||(P=G("event",ye,{type:"event",buffered:!0,durationThreshold:0}))},be=[200,500],Ee=0,Me=function(){return ke()-Ee},we=[],xe={},Le=function(e){var t=we[we.length-1],n=xe[e.interactionId];if(n||we.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};xe[r.id]=r,we.push(r)}we.sort((function(e,t){return t.latency-e.latency})),we.splice(10).forEach((function(e){delete xe[e.id]}))}},Ce=function(e,t){!function(e,t){t=t||{},ie((function(){var n;Se();var r,i=V("INP"),a=function(e){e.forEach((function(e){e.interactionId&&Le(e),"first-input"===e.entryType&&!we.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Le(e)}));var t,n=(t=Math.min(we.length-1,Math.floor(Me()/50)),we[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=G("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=K(e,i,be,t.reportAllChanges),o&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),X((function(){a(o.takeRecords()),i.value<0&&Me()>0&&(i.value=0,i.entries=[]),r(!0)})),J((function(){we=[],Ee=ke(),i=V("INP"),r=K(e,i,be,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0],n=e.entries.find((function(e){return e.target}));e.attribution={eventTarget:H(n&&n.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:R(t.startTime)}}else e.attribution={}}(t),e(t)}),t)},Oe=[2500,4e3],Be={},Ie=[800,1800],Pe=function e(t){document.prerendering?ie((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},De=function(e,t){t=t||{};var n=V("TTFB"),r=K(e,n,Ie,t.reportAllChanges);Pe((function(){var i=q();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;n.value=Math.max(a-U(),0),n.entries=[i],r(!0),J((function(){n=V("TTFB",0),(r=K(e,n,Ie,t.reportAllChanges))(!0)}))}}))},Fe=function(e){e.forEach((function(e){e.identifier&&_({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(n.isResourceTiming&&N("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;m.value[e.initiatorType]+=t,m.value.total+=t}}))},Ne=function(){!function(e,t){De((function(t){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(t),e(t)}),t)}((function(e){e.value>0&&_(e)}),n.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},oe(Y((function(){var n,r=V("CLS",0),i=0,a=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],n=a[a.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e])}})),i>r.value&&(r.value=i,r.entries=a,n())},u=G("layout-shift",o);u&&(n=K(e,r,ue,t.reportAllChanges),X((function(){o(u.takeRecords()),n(!0)})),J((function(){i=0,r=V("CLS",0),n=K(e,r,ue,t.reportAllChanges),Q((function(){return n()}))})),setTimeout(n,0))})))}((function(t){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:H(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:R(t.startTime)})}}var r;e.attribution={}}(t),e(t)}),t)}((function(e){return _(e)}),n.reportOptions.cls),function(e,t){oe((function(t){!function(e){if(e.entries.length){var t=q(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:R(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:R(W())}}(t),e(t)}),t)}((function(e){return _(e)}),n.reportOptions.fcp),function(e,t){me((function(t){!function(e){var t=e.entries[0];e.attribution={eventTarget:H(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:R(t.startTime)}}(t),e(t)}),t)}((function(e){return _(e)}),n.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ie((function(){var n,r=re(),i=V("LCP"),a=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-U(),0),i.entries=[t],n())},o=G("largest-contentful-paint",a);if(o){n=K(e,i,Oe,t.reportAllChanges);var u=Y((function(){Be[i.id]||(a(o.takeRecords()),o.disconnect(),Be[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(u,0)}),!0)})),X(u),J((function(r){i=V("LCP"),n=K(e,i,Oe,t.reportAllChanges),Q((function(){i.value=performance.now()-r.timeStamp,Be[i.id]=!0,n(!0)}))}))}}))}((function(t){!function(e){if(e.entries.length){var t=q();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),u=Math.max(o,i?i.responseEnd-n:0),c=Math.max(u,r?r.startTime-n:0),s={element:H(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:u-o,elementRenderDelay:c-u,navigationEntry:t,lcpEntry:r};return r.url&&(s.url=r.url),i&&(s.lcpResourceEntry=i),void(e.attribution=s)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(t),e(t)}),t)}((function(e){return _(e)}),n.reportOptions.lcp),Ce((function(e){return _(e)}),n.reportOptions.inp),n.isResourceTiming&&S("resource",je),n.isElementTiming&&S("element",Fe)},_e=function(e){var t="usageDetails"in e?e.usageDetails:{};N("storageEstimate",{quota:w(e.quota),usage:w(e.usage),caches:w(t.caches),indexedDB:w(t.indexedDB),serviceWorker:w(t.serviceWorkerRegistrations)})},qe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Re=function(e){delete qe.active[e]},Ae=function(){qe.startMarkToStepsMap={},qe.finalMarkToStepsMap={},qe.active={},qe.navigationSteps={}},He=function(){return qe.navigationSteps},ze=function(e){var t;return null!==(t=He()[e])&&void 0!==t?t:{}},We=function(e,t,r){var i="step."+e,a=o.getEntriesByName(s+t).length>0;if(o.getEntriesByName(s+r).length>0&&a&&n.steps&&n.steps[e]){var u=D[n.steps[e].threshold],c=u.maxOutlierThreshold,l=u.vitalsThresholds,f=o.measure(i,s+t,s+r);if(f){var d=f.duration;if(d<=c){var v=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,l);d>=0&&(x("userJourneyStep",d,v,{stepName:e},void 0),o.measure("step.".concat(e,"_vitals_").concat(v),{start:f.startTime+f.duration,end:f.startTime+f.duration,detail:{type:"stepVital",duration:d}}))}}}},Je=function(){var e=He(),t=qe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=ze(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=ze(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Ue=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((r=r.apply(e,t||[])).next())}))},Ve=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ge=function(e){var t,r,i,a,o,u;if(qe.finalMarkToStepsMap[e]){!function(e){var t=qe.navigationSteps,n=qe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=ze(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=ze(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,u=ze(o);u[e]&&(u[e]=!1,t[o]=u)}}))}}}(e);var c=qe.finalMarkToStepsMap[e];Object.keys(c).forEach((function(t){var n=c[t];n.forEach(Re),Promise.all(n.map((function(n){return Ue(void 0,void 0,void 0,(function(){return Ve(this,(function(r){switch(r.label){case 0:return[4,We(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=qe.navigationSteps,a=Object.keys(i).length,(u=ze(o=(a>0?a:1)-1)||[])[r]=!0,i[o]=u,function(e){var t,n=null!==(t=qe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){qe.active[e]||(qe.active[e]=!0)}))}(e);var s=Je();null===(t=n.onMarkStep)||void 0===t||t.call(n,e,Object.keys(s))},Ke=function(e){l()&&!v[e]&&(v[e]=!0,o.mark("mark_".concat(e,"_start")))},Qe=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),l()&&v[e]){o.mark("mark_".concat(e,"_end")),delete v[e];var r=function(e){o.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=o.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&N(e,M(r),t)}},Xe=0;exports.clear=function(e){delete v[e],o.clearMarks&&(o.clearMarks("mark_".concat(e,"_start")),o.clearMarks("mark_".concat(e,"_end")))},exports.end=Qe,exports.initPerfume=function(e){if(void 0===e&&(e={}),n.analyticsTracker=e.analyticsTracker,n.isResourceTiming=!!e.resourceTiming,n.isElementTiming=!!e.elementTiming,n.maxTime=e.maxMeasureTime||n.maxTime,n.reportOptions=e.reportOptions||n.reportOptions,n.steps=e.steps,n.onMarkStep=e.onMarkStep,l()){"PerformanceObserver"in r&&Ne(),void 0!==document.hidden&&document.addEventListener("visibilitychange",k);var t=function(){if(!l())return{};var e=o.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();N("navigationTiming",t),t.redirectTime&&_({attribution:{},name:"RT",rating:j("RT",t.redirectTime),value:t.redirectTime}),N("networkInformation",function(){if("connection"in a){var e=a.connection;return"object"!=typeof e?{}:(f=e.effectiveType,d=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),a&&a.storage&&"function"==typeof a.storage.estimate&&a.storage.estimate().then(_e),n.steps&&n.steps&&(Ae(),Object.entries(n.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],u=null!==(n=qe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(u[r]=!0,qe.startMarkToStepsMap[a]=u,qe.finalMarkToStepsMap[o]){var c=qe.finalMarkToStepsMap[o][a]||[];c.push(r),qe.finalMarkToStepsMap[o][a]=c}else qe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}},exports.markNTBT=function(){Ke("ntbt"),T.value=0,clearTimeout(Xe),Xe=setTimeout((function(){Qe("ntbt",{},!1),_({attribution:{},name:"NTBT",rating:j("NTBT",T.value),value:T.value}),T.value=0}),2e3)},exports.markStep=function(e){l()&&(o.mark(s+e),Ge(e))},exports.markStepOnce=function(e){0===o.getEntriesByName(s+e).length&&(o.mark(s+e),Ge(e))},exports.start=Ke,exports.trackUJNavigation=function(){var e,t=Object.keys(qe.navigationSteps).length;qe.navigationSteps[t]={};var r=Je();null===(e=n.onMarkStep)||void 0===e||e.call(n,"",Object.keys(r))};
//# sourceMappingURL=perfume.min.js.map
